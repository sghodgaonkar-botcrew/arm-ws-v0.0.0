<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CPP Plugins: C++ Plugins for Robot Arm Control</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CPP Plugins
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">C++ Plugins for Robot Arm Control </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="intro_sec"></a>
Introduction</h1>
<p>This project provides a comprehensive C++ library for robot arm control, featuring inverse kinematics (IK) solving with reachable workspace support, motor control, and workspace generation capabilities. The library is designed for deployment on NVIDIA Jetson Orin Nano and provides efficient, real-time robot arm control.</p>
<p>The system consists of several key components:</p><ul>
<li><b>Robot Model</b>: URDF-based robot representation with kinematics and collision detection</li>
<li><b>IK Solver with RWS</b>: Fast inverse kinematics using pre-computed reachable workspace data</li>
<li><b>Workspace Generator</b>: Tools for generating and sampling robot workspace data</li>
<li><b>Motor Controller</b>: Interface for controlling Moteus motor controllers</li>
<li><b>Workspace Types</b>: Common data structures for workspace representation</li>
</ul>
<h1><a class="anchor" id="classes_sec"></a>
Main Classes</h1>
<h3><a class="anchor" id="autotoc_md0"></a>
@ref RobotModel "RobotModel Class"</h3>
<p>Core robot model class that loads URDF/SRDF files and provides:</p><ul>
<li>Forward kinematics computation using Pinocchio</li>
<li>Geometric Jacobian calculation</li>
<li>Collision detection with ground clearance</li>
<li>Joint limit management</li>
<li>Pose conversion utilities (SE3 â†” XYZQuat)</li>
<li>Cost function, gradient, and Hessian computation for IK optimization</li>
</ul>
<h3><a class="anchor" id="autotoc_md1"></a>
@ref IKSolverWithRWS "IKSolverWithRWS Class"</h3>
<p>High-performance inverse kinematics solver that provides:</p><ul>
<li>Two-stage IK solving: warm-start + iterative refinement</li>
<li>Spatial indexing with k-d trees and voxel grids</li>
<li>Quadratic programming optimization with line search</li>
<li>Automatic workspace data loading</li>
<li>Support for both XYZQuat and SE3 pose formats</li>
<li>Fast nearest neighbor search for initialization</li>
</ul>
<h3><a class="anchor" id="autotoc_md2"></a>
@ref ReachableWorkspaceGenerator "ReachableWorkspaceGenerator Class"</h3>
<p>Workspace generation tools that provide:</p><ul>
<li>Random sampling within joint limits</li>
<li>Collision detection and validation</li>
<li>Duplicate configuration handling</li>
<li>Multiple output formats (PLY, binary, voxel grid)</li>
<li>Batch processing for efficiency</li>
<li>Hash-based duplicate detection</li>
</ul>
<h3><a class="anchor" id="autotoc_md3"></a>
@ref MotorController "MotorController Class"</h3>
<p>Motor control interface that manages:</p><ul>
<li>Multiple Moteus motor controllers</li>
<li>Position control with acceleration limits</li>
<li>Torque release functionality</li>
<li>Threaded pose holding mechanism</li>
<li>Configurable torque limits</li>
<li>Thread-safe operations</li>
</ul>
<h3><a class="anchor" id="autotoc_md4"></a>
Data Structures</h3>
<h4><a class="anchor" id="autotoc_md5"></a>
@ref WorkspacePoint "WorkspacePoint Structure"</h4>
<p>Structure containing position, rotation, and joint configuration for workspace points.</p>
<h4><a class="anchor" id="autotoc_md6"></a>
@ref NearestNeighbor "NearestNeighbor Structure"</h4>
<p>Search result structure with index and distance for nearest neighbor searches.</p>
<h4><a class="anchor" id="autotoc_md7"></a>
@ref VoxelGrid "VoxelGrid Structure"</h4>
<p>Sparse voxel grid for spatial indexing and fast neighbor search.</p>
<h1><a class="anchor" id="features_sec"></a>
Key Features</h1>
<ul>
<li><b>Real-time Performance</b>: Optimized for real-time control applications with O(log n) neighbor search</li>
<li><b>Collision Avoidance</b>: Built-in collision detection and ground clearance validation</li>
<li><b>Joint Limit Safety</b>: Automatic joint limit enforcement with velocity bounds</li>
<li><b>Multi-motor Support</b>: Control multiple motors simultaneously with thread safety</li>
<li><b>DDS Integration</b>: Real-time communication using CycloneDDS</li>
<li><b>Workspace Pre-computation</b>: Fast IK solving using pre-generated workspace data</li>
<li><b>Spatial Indexing</b>: Efficient k-d trees and voxel grids for neighbor search</li>
<li><b>Robust Optimization</b>: Quadratic programming with line search for reliable convergence</li>
</ul>
<h1><a class="anchor" id="architecture_sec"></a>
Architecture Overview</h1>
<p>The library implements a sophisticated two-stage IK solving approach:</p>
<ol type="1">
<li><b>Warm-start Initialization</b>: Uses nearest neighbor search in pre-computed workspace data to find good initial joint configurations close to the target pose</li>
<li><b>Iterative Refinement</b>: Uses quadratic programming with line search to refine the initial configuration and achieve precise pose matching</li>
</ol>
<p>The workspace data is stored in binary files containing:</p><ul>
<li>K-d tree data: sampled workspace points with positions, orientations, and joint configs</li>
<li>Voxel grid data: spatial indexing structure for fast neighbor search</li>
</ul>
<h1><a class="anchor" id="usage_sec"></a>
Usage</h1>
<p>The system is designed to work with:</p><ul>
<li>URDF/SRDF robot descriptions</li>
<li>Moteus motor controllers</li>
<li>CycloneDDS for communication</li>
<li>Pre-generated workspace data for fast IK solving</li>
</ul>
<p>Typical usage workflow:</p><ol type="1">
<li>Load robot model from URDF/SRDF files</li>
<li>Generate workspace data using <a class="el" href="classReachableWorkspaceGenerator.html" title="Main workspace generator class for robot reachable workspace sampling.">ReachableWorkspaceGenerator</a></li>
<li>Initialize IK solver with workspace data</li>
<li>Solve IK for target poses</li>
<li>Control motors using computed joint configurations</li>
</ol>
<h1><a class="anchor" id="dependencies_sec"></a>
Dependencies</h1>
<h3><a class="anchor" id="autotoc_md8"></a>
Required Libraries</h3>
<ul>
<li><b>Eigen3</b>: Linear algebra and geometry operations</li>
<li><b>Pinocchio</b>: Robot kinematics and dynamics</li>
<li><b>ProxSuite</b>: Quadratic programming solver</li>
<li><b>Nanoflann</b>: Efficient k-d tree implementation</li>
<li><b>Moteus</b>: Motor controller library</li>
<li><b>CycloneDDS-CXX</b>: DDS communication</li>
<li><b>Boost</b>: Random number generation and utilities</li>
<li><b>OpenMP</b>: Parallel processing (optional)</li>
</ul>
<h3><a class="anchor" id="autotoc_md9"></a>
System Requirements</h3>
<ul>
<li>Ubuntu 22.04.5 LTS or compatible</li>
<li>NVIDIA Jetson Orin Nano (target deployment platform)</li>
<li>C++17 compiler</li>
<li>CMake 3.16+</li>
</ul>
<h1><a class="anchor" id="performance_sec"></a>
Performance Characteristics</h1>
<h3><a class="anchor" id="autotoc_md10"></a>
IK Solver Performance</h3>
<ul>
<li><b>Warm-start initialization</b>: Uses spatial indexing for O(log n) neighbor search</li>
<li><b>Iterative refinement</b>: Quadratic programming with line search for robust convergence</li>
<li><b>Typical convergence</b>: 10-50 iterations for most poses</li>
<li><b>Memory usage</b>: ~100MB for 50K workspace points</li>
</ul>
<h3><a class="anchor" id="autotoc_md11"></a>
Workspace Generation Performance</h3>
<ul>
<li><b>Sampling efficiency</b>: 10-30% success rate depending on robot geometry</li>
<li><b>Batch processing</b>: Improves cache locality and reduces memory allocation</li>
<li><b>Duplicate detection</b>: O(1) hash-based lookup</li>
<li><b>Output formats</b>: Binary files for fast loading</li>
</ul>
<h3><a class="anchor" id="autotoc_md12"></a>
Motor Control Performance</h3>
<ul>
<li><b>Position control</b>: Non-blocking with acceleration limits</li>
<li><b>Thread safety</b>: Mutex-protected operations</li>
<li><b>Torque management</b>: Immediate release capability</li>
<li><b>Real-time operation</b>: Suitable for control loops</li>
</ul>
<h1><a class="anchor" id="build_sec"></a>
Building</h1>
<p>The project uses CMake for building. See the CMakeLists.txt file for detailed build instructions and dependencies.</p>
<div class="fragment"><div class="line">cd dds_bridge/cpp_plugins</div>
<div class="line">mkdir build &amp;&amp; cd build</div>
<div class="line">cmake ..</div>
<div class="line">make -j$(nproc)</div>
</div><!-- fragment --><h1><a class="anchor" id="examples_sec"></a>
Examples</h1>
<p>The library includes comprehensive examples in the <code>src/</code> directory:</p><ul>
<li><code>example_workspace_generator.cpp</code>: Basic workspace generation</li>
<li><code>test_ik_solver_w_rws.cpp</code>: IK solving with multiple target poses</li>
<li><code>mc_tester.cpp</code>: Motor control testing</li>
<li><code>ik_solver_w_rws_dev.cpp</code>: Development version with detailed timing</li>
</ul>
<h1><a class="anchor" id="deployment_sec"></a>
Deployment</h1>
<p>The library is specifically designed for deployment on NVIDIA Jetson Orin Nano:</p><ul>
<li>Optimized for ARM64 architecture</li>
<li>Memory-efficient data structures</li>
<li>Real-time performance characteristics</li>
<li>Minimal external dependencies</li>
</ul>
<h1><a class="anchor" id="troubleshooting_sec"></a>
Troubleshooting</h1>
<p>Common issues and solutions:</p><ul>
<li><b>Workspace data not found</b>: Ensure workspace generation has been run</li>
<li><b>IK solver not converging</b>: Check if target pose is within reachable workspace</li>
<li><b>Motor communication errors</b>: Check USB connections and permissions</li>
<li><b>Build errors</b>: Install all required dependencies and verify C++17 support</li>
</ul>
<p>For detailed troubleshooting information, see the README.md file in the project root. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
